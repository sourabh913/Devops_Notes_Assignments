1) mkdir : /etc/ansible/docker-ansible-playbook
Make sure for the hosts(IP) entries in hosts file.

2) create a yml file as below : docker-install.yml

---
- name: Install Docker on Ubuntu
  hosts: all
  become: true
  tasks:

    - name: Add Docker repository
      apt_repository:
        repo: deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable
        state: present

    - name: Install Docker
      apt:
        name:
          - docker-ce
          - docker-ce-cli
          - containerd.io
        state: latest

    - name: Ensure Docker is running
      service:
        name: docker
        state: started
        enabled: yes

    - name: Add current user to docker group
      user:
        name: "{{ ansible_user }}"
        groups: docker
        append: yes

    - name: Verify Docker installation
      command: docker --version
      register: docker_version

    - debug:
        msg: "Docker version: {{ docker_version.stdout }}"

--------
3) run the yml file in using ansible :

ansible-playbook -i hosts docker-install.yml
--------
4) OUTPUT :

TASK [Add Docker repository] ************************************************************************************************************************
ok: [13.127.246.67]
ok: [13.235.128.93]

TASK [Install Docker] *******************************************************************************************************************************
ok: [13.127.246.67]
ok: [13.235.128.93]

TASK [Ensure Docker is running] *********************************************************************************************************************
ok: [13.235.128.93]
ok: [13.127.246.67]

TASK [Add current user to docker group] *************************************************************************************************************
ok: [13.235.128.93]
ok: [13.127.246.67]

TASK [Verify Docker installation] *******************************************************************************************************************
changed: [13.235.128.93]
changed: [13.127.246.67]

TASK [debug] ****************************************************************************************************************************************
ok: [13.235.128.93] => {
    "msg": "Docker version: Docker version 27.1.2, build d01f264"
}
ok: [13.127.246.67] => {
    "msg": "Docker version: Docker version 27.1.2, build d01f264"
}

PLAY RECAP ******************************************************************************************************************************************
13.127.246.67              : ok=9    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
13.235.128.93              : ok=9    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
